<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        canvas {
            border: 1px solid #000;
        }
    </style>
    <title>Math Game</title>
</head>
<body>
<canvas id="gameCanvas" width="800" height="600"></canvas>
<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    const player = {
        hp: 100,
        damage: 0,
    };

    const enemy = {
        hp: 100,
        width: 50,
        height: 50,
        x: canvas.width / 2 - 25,
        y: 50,
    };

    const cards = [
        {stars: 1, equation: generateEquation(1)},
        {stars: 2, equation: generateEquation(2)},
        {stars: 3, equation: generateEquation(3)},
    ];

    const inputField = document.createElement('input');
    inputField.type = 'number';
    inputField.placeholder = 'Enter your answer';
    document.body.appendChild(inputField);

    canvas.addEventListener('click', onClick);

    function onClick(event) {
        const clickX = event.clientX - canvas.offsetLeft;
        const clickY = event.clientY - canvas.offsetTop;

        for (let i = 0; i < cards.length; i++) {
            const card = cards[i];
            if (
                clickX > i * (canvas.width / cards.length) &&
                clickX < (i + 1) * (canvas.width / cards.length) &&
                clickY > canvas.height - 100 &&
                clickY < canvas.height
            ) {
                const answer = prompt(`Solve the equation: ${card.equation}`);
                if (answer !== null) {
                    checkAnswer(parseInt(answer), card.stars);
                }
            }
        }
    }

    function generateEquation(difficulty) {
        const operators = ['+', '-', '*'];
        const operator = operators[Math.floor(Math.random() * operators.length)];
        const num1 = Math.floor(Math.random() * 10 * difficulty);
        const num2 = Math.floor(Math.random() * 10 * difficulty);
        return `${num1} ${operator} ${num2}`;
    }

    function checkAnswer(answer, stars) {
        const result = eval(cards[stars - 1].equation);
        if (answer === result) {
            enemy.hp -= answer;
            player.damage += answer;
            if (enemy.hp <= 0) {
                alert('You defeated the enemy!');
                resetGame();
            } else {
                draw();
            }
        } else {
            player.hp -= result;
            if (player.hp <= 0) {
                alert('Game over! You lost.');
                resetGame();
            } else {
                draw();
            }
        }
    }

    function resetGame() {
        player.hp = 100;
        player.damage = 0;
        enemy.hp = 100;
        cards.forEach(card => card.equation = generateEquation(card.stars));
        draw();
    }

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw player HP
        ctx.fillStyle = 'green';
        ctx.fillRect(10, canvas.height - 30, player.hp, 20);

        // Draw enemy HP
        ctx.fillStyle = 'red';
        ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);

        // Draw player damage
        ctx.fillStyle = 'blue';
        ctx.fillText(`Player Damage: ${player.damage}`, 10, canvas.height - 40);

        // Draw cards
        for (let i = 0; i < cards.length; i++) {
            const card = cards[i];
            ctx.fillStyle = 'lightgray';
            ctx.fillRect(i * (canvas.width / cards.length), canvas.height - 100, canvas.width / cards.length, 100);
            ctx.fillStyle = 'black';
            ctx.fillText(`Stars: ${card.stars}`, i * (canvas.width / cards.length) + 10, canvas.height - 80);
        }
    }

    resetGame();
</script>
</body>
</html>
